(function(g){g.fn.swipe=function(m){if(!this)return false;var b={fingers:1,threshold:75,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:true,allowPageScroll:"auto"},p="left",v="right",w="up",x="down",y="none",z="horizontal",A="vertical",G="auto",H="start",B="move",q="end",n="cancel",d="ontouchstart"in window,C=d?"touchstart":"mousedown",r=d?"touchmove":"mousemove",s=d?"touchend":"mouseup",c="start";if(m.allowPageScroll==undefined&&
(m.swipe!=undefined||m.swipeStatus!=undefined))m.allowPageScroll=y;m&&g.extend(b,m);return this.each(function(){function D(a){var e=d?a.touches[0]:a;c=H;if(d)k=a.touches.length;distance=0;direction=null;if(k==b.fingers||!d){h.x=f.x=e.pageX;h.y=f.y=e.pageY;b.swipeStatus&&o(a,c)}else l(a);if(d){document.addEventListener(r,t);document.addEventListener(s,u)}else{g(document).bind(r,t);g(document).bind(s,u)}}function t(a){if(!(c==q||c==n)){var e=d?a.touches[0]:a;f.x=e.pageX;f.y=e.pageY;direction=E();if(d)k=
a.touches.length;c=B;e=direction;if(b.allowPageScroll==y)a.preventDefault();else{var i=b.allowPageScroll==G;switch(e){case p:if(b.swipeLeft&&i||!i&&b.allowPageScroll!=z)a.preventDefault();break;case v:if(b.swipeRight&&i||!i&&b.allowPageScroll!=z)a.preventDefault();break;case w:if(b.swipeUp&&i||!i&&b.allowPageScroll!=A)a.preventDefault();break;case x:if(b.swipeDown&&i||!i&&b.allowPageScroll!=A)a.preventDefault()}}if(k==b.fingers||!d){distance=F();b.swipeStatus&&o(a,c,direction,distance);if(!b.triggerOnTouchEnd)if(distance>=
b.threshold){c=q;o(a,c);l(a)}}else{c=n;o(a,c);l(a)}}}function u(a){a.preventDefault();distance=F();direction=E();if(b.triggerOnTouchEnd){c=q;if((k==b.fingers||!d)&&f.x!=0)distance>=b.threshold||(c=n);else c=n;o(a,c);l(a)}else if(c==B){c=n;o(a,c);l(a)}if(d){document.removeEventListener(r,t);document.removeEventListener(s,u)}else{g(document).unbind(r,t);g(document).unbind(s,u)}}function l(){k=0;h.x=0;h.y=0;f.x=0;f.y=0}function o(a,e){if(b.swipeStatus)b.swipeStatus.call(j,a,e,direction||null,distance||
0);if(e==n)if(b.click&&(k==1||!d)&&(isNaN(distance)||distance==0))b.click.call(j,a,a.target);if(e==q){b.swipe&&b.swipe.call(j,a,direction,distance);switch(direction){case p:b.swipeLeft&&b.swipeLeft.call(j,a,direction,distance);break;case v:b.swipeRight&&b.swipeRight.call(j,a,direction,distance);break;case w:b.swipeUp&&b.swipeUp.call(j,a,direction,distance);break;case x:b.swipeDown&&b.swipeDown.call(j,a,direction,distance)}}}function F(){return Math.round(Math.sqrt(Math.pow(f.x-h.x,2)+Math.pow(f.y-
h.y,2)))}function E(){var a;a=Math.round(Math.atan2(f.y-h.y,h.x-f.x)*180/Math.PI);if(a<0)a=360-Math.abs(a);a=a;return a<=45&&a>=0?p:a<=360&&a>=315?p:a>=135&&a<=225?v:a>45&&a<135?x:w}var j=g(this),k=0,h={x:0,y:0},f={x:0,y:0};if(d){this.addEventListener(C,D);document.addEventListener("touchcancel",l)}else{j.bind(C,D);g(document).bind("touchcancel",l)}})}})(jQuery);
